<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DnD Tabletop MVP</title>
    <style>
      html, body, #app { height: 100%; margin: 0; background: #0b0e13; color: #e8eaed; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto; }
      #hud { position: fixed; top: 8px; right: 8px; left: auto; background: rgba(0,0,0,0.5); padding: 8px 10px; border-radius: 8px; font-size: 12px; z-index: 10; text-align: right; }
      /* Left panel */
      #left-panel { position: fixed; top: 12px; bottom: 12px; left: 12px; width: 220px; overflow: auto; background: rgba(0,0,0,0.6); padding: 12px; border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.3); backdrop-filter: blur(6px); }
      /* Right panel: character sheet */
      #right-panel { position: fixed; top: 12px; bottom: 12px; right: 12px; width: 240px; overflow: auto; background: rgba(0,0,0,0.6); padding: 12px; border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.3); backdrop-filter: blur(6px); display: grid; align-content: center; }
      #right-panel .title { font-size: 12px; text-transform: uppercase; color: #9aa0a6; margin: 6px 2px 10px; letter-spacing: 0.04em; }
      .panel-group { margin-bottom: 12px; }
      .panel-title { font-size: 12px; text-transform: uppercase; color: #9aa0a6; margin: 6px 2px 6px; letter-spacing: 0.04em; }
      .row { display: flex; flex-wrap: wrap; gap: 8px; }
      button { background: #1f2937; color: #e8eaed; border: 1px solid #374151; border-radius: 8px; padding: 8px 10px; font-size: 13px; cursor: pointer; }
      button:hover { background: #263142; }
      button:disabled { opacity: 0.5; cursor: not-allowed; }
      .selected { outline: 2px solid #8ab4f8; }
      .brush button { flex: 1 0 45%; text-align: center; }
      a { color: #8ab4f8; }
      /* Locations list */
      .loc-section-title { font-size: 11px; text-transform: uppercase; color: #9aa0a6; margin: 10px 6px 6px; letter-spacing: 0.04em; }
      .loc-item { display: flex; align-items: center; gap: 8px; padding: 8px 10px; border-radius: 10px; cursor: pointer; }
      .loc-item:hover { background: rgba(255,255,255,0.06); }
      .loc-item.active { background: rgba(138,180,248,0.16); outline: 1px solid rgba(138,180,248,0.35); }
      .loc-item .icon { width: 18px; text-align: center; opacity: 0.9; }
      .loc-item .name { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
      .twist { width: 16px; text-align: center; opacity: 0.8; margin-right: 2px; }
    </style>
    <script type="module" crossorigin src="/assets/index-k2Xo3_XV.js"></script>
  </head>
  <body>
    <div id="app"></div>
    <div id="hud">
      <div><b>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</b>: –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π—Ç–µ —Ç–æ–∫–µ–Ω –º—ã—à—å—é (Drag & Drop).</div>
      <div>–ü–∞—Ä–∞–º–µ—Ç—Ä –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è: <code>?inv=dm-local</code> (–ú–∞—Å—Ç–µ—Ä) –∏–ª–∏ <code>?inv=pl-local</code> (–ò–≥—Ä–æ–∫)</div>
    </div>
    <div id="left-panel">
      <div class="panel-group" id="tools">
        <div class="panel-title">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</div>
        <div class="row">
          <button id="btn-tool-cursor" title="–ö—É—Ä—Å–æ—Ä (–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ)">–ö—É—Ä—Å–æ—Ä</button>
        </div>
      </div>
      <div class="panel-group brush" id="brush">
        <div class="panel-title">–ö–∏—Å—Ç—å</div>
        <div class="row">
          <button id="brush-1">1x1</button>
          <button id="brush-2">2x2</button>
          <button id="brush-3">3x3</button>
          <button id="brush-4">4x4</button>
        </div>
      </div>
      <div class="panel-group" id="fog">
        <div class="panel-title">–¢—É–º–∞–Ω –≤–æ–π–Ω—ã</div>
        <div class="row">
          <button id="btn-tool-reveal-fog" title="–û—Ç–∫—Ä—ã—Ç—å —Ç—É–º–∞–Ω –≤–æ–π–Ω—ã (–≤–∏–¥–∏–º–æ)">–û—Ç–∫—Ä—ã—Ç—å —Ç—É–º–∞–Ω</button>
          <button id="btn-tool-erase-fog" title="–°–∫—Ä—ã—Ç—å —Ç—É–º–∞–Ω–æ–º (—Å—Ç–µ—Ä–µ—Ç—å)">–°–∫—Ä—ã—Ç—å —Ç—É–º–∞–Ω–æ–º</button>
        </div>
      </div>
      <div class="panel-group" id="characters">
        <div class="panel-title">–ü–µ—Ä—Å–æ–Ω–∞–∂–∏</div>
        <div class="row">
          <button id="btn-tool-erase-tokens" title="–õ–∞—Å—Ç–∏–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π (—É–¥–∞–ª—è–µ—Ç —Ç–æ–∫–µ–Ω—ã)">üßΩ –õ–∞—Å—Ç–∏–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π</button>
          <button id="btn-add-player" title="–î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞">üßô –ò–≥—Ä–æ–∫</button>
          <button id="btn-add-npc" title="–î–æ–±–∞–≤–∏—Ç—å NPC">üßü NPC</button>
        </div>
      </div>
      <div class="panel-group" id="assets">
        <div class="panel-title">–ê—Å—Å–µ—Ç—ã</div>
        <div class="row">
          <button id="btn-tool-erase-objects" title="–õ–∞—Å—Ç–∏–∫ –∞—Å—Å–µ—Ç–æ–≤ (—Å—Ç–∏—Ä–∞–µ—Ç –∞—Å—Å–µ—Ç—ã)">üßΩ –õ–∞—Å—Ç–∏–∫ –∞—Å—Å–µ—Ç–æ–≤</button>
          <button class="asset" id="asset-tree" title="–î–µ—Ä–µ–≤–æ">üå≥ –î–µ—Ä–µ–≤–æ</button>
          <button class="asset" id="asset-rock" title="–ö–∞–º–µ–Ω—å">ü™® –ö–∞–º–µ–Ω—å</button>
          <button class="asset" id="asset-bush" title="–ö—É—Å—Ç">üåø –ö—É—Å—Ç</button>
          <button class="asset" id="asset-wall" title="–°—Ç–µ–Ω–∞">üß± –°—Ç–µ–Ω–∞</button>
          <button class="asset" id="asset-window" title="–û–∫–Ω–æ">ü™ü –û–∫–Ω–æ</button>
          <button class="asset" id="asset-door" title="–î–≤–µ—Ä—å">üö™ –î–≤–µ—Ä—å</button>
          <button class="asset" id="asset-chest" title="–°—É–Ω–¥—É–∫">üì¶ –°—É–Ω–¥—É–∫</button>
          <button class="asset" id="asset-sword" title="–ú–µ—á">üó°Ô∏è –ú–µ—á</button>
          <button class="asset" id="asset-bow" title="–õ—É–∫">üèπ –õ—É–∫</button>
          <button class="asset" id="asset-coins" title="–ú–æ–Ω–µ—Ç—ã">ü™ô –ú–æ–Ω–µ—Ç—ã</button>
          <button class="asset" id="asset-other" title="–î—Ä—É–≥–∏–µ —ç–º–æ–¥–∑–∏">‚ú® –î—Ä—É–≥–æ–µ</button>
        </div>
      </div>
      <div class="panel-group" id="floors">
        <div class="panel-title">–ü–æ–ª</div>
        <div class="row">
          <button id="btn-tool-erase-space" title="–õ–∞—Å—Ç–∏–∫ –ø–æ–ª–∞ (—É–¥–∞–ª—è–µ—Ç –ø–æ–ª –∏ –æ–±—ä–µ–∫—Ç—ã)">üßΩ –õ–∞—Å—Ç–∏–∫ –ø–æ–ª–∞</button>
          <button class="asset" id="floor-stone" title="–ü–æ–ª: –∫–∞–º–µ–Ω—å">üß± –ö–∞–º–µ–Ω—å</button>
          <button class="asset" id="floor-wood" title="–ü–æ–ª: –¥–µ—Ä–µ–≤–æ">ü™µ –î–µ—Ä–µ–≤–æ</button>
          <button class="asset" id="floor-water" title="–ü–æ–ª: –≤–æ–¥–∞">üíß –í–æ–¥–∞</button>
          <button class="asset" id="floor-sand" title="–ü–æ–ª: –ø–µ—Å–æ–∫">üèñÔ∏è –ü–µ—Å–æ–∫</button>
        </div>
      </div>
      <div class="panel-group" id="locations-panel">
        <div class="panel-title">–õ–æ–∫–∞—Ü–∏–∏ (—Å–µ—Ä–≤–µ—Ä)</div>
        <div class="row" style="margin-bottom:6px;">
          <button id="btn-new-map" title="–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ø—É—Å—Ç—É—é –∫–∞—Ä—Ç—É">üó∫Ô∏è –ù–æ–≤–∞—è –∫–∞—Ä—Ç–∞</button>
          <button id="btn-new-folder" title="–°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É">üìÅ –ù–æ–≤–∞—è –ø–∞–ø–∫–∞</button>
        </div>
        <div id="locations-tree" style="font-size:13px; line-height:1.5;"></div>
      </div>
    </div>
    <div id="right-panel">
      <div class="title">–õ–∏—Å—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</div>
      <div style="opacity:.7">–ù–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞</div>
    </div>
    <!-- Emoji picker modal -->
    <div id="emoji-modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.55); z-index:1000; align-items:center; justify-content:center;">
      <div style="background:#111827; border:1px solid #374151; border-radius:12px; padding:12px; width:min(520px, 90vw); max-height:70vh; display:flex; flex-direction:column; gap:8px;">
        <div style="display:flex; gap:8px; align-items:center;">
          <input id="emoji-search" placeholder="–ü–æ–∏—Å–∫ —ç–º–æ–¥–∑–∏..." style="flex:1; padding:8px 10px; border-radius:8px; background:#1f2937; color:#e8eaed; border:1px solid #374151;" />
          <button id="emoji-close">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
        <div id="emoji-grid" style="overflow:auto; display:grid; grid-template-columns: repeat(auto-fill, minmax(44px, 1fr)); gap:6px; padding:4px;">
        </div>
      </div>
    </div>

  </body>
</html>
